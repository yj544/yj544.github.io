---
title: "Java Generic"
categories:
  - java
tags:
  - java
  - generic
  
toc: true
toc_icon: "cog"
toc_sticky: true
---

### OSI(Open System Interconnection Reference Model) 7 Layer
- 국제 표준화 기구인 ISO에서 개발한 모델로 네트워킹을 위한 물리적 장비에서 실제 서비스를 제공하기 위한 애플리케이션에 이르는 단계를 나타내는 7계층
- 물리 계층
  - 전기적, 기계적, 기능적인 특성을 통해 통신 케이블로 데이터를 전송
  - 단위 : 비트
  - ex) 허브, 리피터, 통신 케이블
- 데이터 링크 계층
  - 물리 계층을 통해서 송/수신되는 정보의 오류를 찾거나 문제가 생겼을 경우 재전송하는 등 흐름을 관리하여 안전한 정보의 전달을 수행할 수 있도록 함
  - 단위 : 프레임
  - ex) 브릿지, 스위치
- 네트워크 계층 : 주소 부여 및 경로 설정
  - 데이터를 목적지까지 가장 안전하고 빠르게 전송하기 위해 경로를 선택하고 주소를 정해서 패킷을 전달해주는 일련의 과정을 담당 
  - ex) 라우터 (스위치에 라우팅 기능이 있는 경우가 있는데 이 대는 Layer 3 스위치라고 함)
- 전송 계층 : 패킷 생성
  - 종단간(end-to-end) 통신을 다루는 최하위 계층으로 종단간 신뢰성 있고 효율적인 데이터를 전송하며 오류 검출 및 복구와 흐름 제어, 중복 검사 등을 수행
  - TCP
    - 연결 지향으로 데이터 전송 시 송/수신 측이 전용의 데이터 전송 선로인 세션을 만듦
    - 자체적 오류를 처리하며 네트워크 전송 중 순서가 뒤바뀐 메시지 교정 기능이 있어 데이터 간 신뢰도가 중요한 경우 사용
  - UDP
    - 비연결 지향으로 TCP와 같은 데이터 교정 기능이 존재하지 않는 단순 전송 프로토콜
    - 실시간 멀티미디어 정보를 처리할 때 주로 사용
- 세션 계층 : 통신을 위한 세션을 확립 / 유지 / 중단
  - 양 끝단의 프로세스가 통신을 관리하기 위한 방법을 제공하며 TCP/IP 세션을 만들고 없앰
  - 동시 송수신 방식(duplex), 반이중 방식(half-duplex), 전이중 방식(full duplex)의 통신과 함께 체크 포인팅과 유휴, 종료, 다시 시작 과정 등을 수행
- 표현 계층
  - 코드 간 번역을 담당하여 사용자 시스템에서 처리해야할 데이터의 형식상 차이를 다루는 부담을 덜어줌
  - MIME 인코딩, 암호화 등
- 응용 계층
  - 일반적인 응용 소프트웨어들이 사용하는 계층
  - HTTP/FTP/TELNET/SSH 등 표준 애플리케이션 프로토콜이 위치하는 계층

#### Encapsulation
- 전송 대상 데이터를 목적지까지 보내기 위해 각 계층을 거치면서 필요한 헤더를 데이터 앞(또는 뒤)에 붙이는데, 이 작업을 캡슐화라고 함

#### Demultiplexing
- 목적지에 데이터가 도착하면 각 계층은 자신의 계층에서 처리해야 할 헤더를 제거하고 상위 계층으로 넘기는 작업을 하는데, 이 작업을 . 
### TCP/IP
- 패킷 통신 방식의 인터넷 프로토콜인 IP와 전송 조절 프로토콜인 TCP로 이뤄진 인터넷 기반 프로토콜
- HTTP, FTP, SMTP 등 TCP 기반의 애플리케이션 프로토콜들이 IP 기반으로 동작하기 때문에 묶어서 TCP/IP라고 한다. 

#### TCP/IP 4 Layer
- OSI 7계층이 단순화된 형태의 4계층으로 구성됨
- 응용 계층 : HTTP, FTP, SMTP, SSH ...
- 전송 계층 : 통신 노드 간 연결을 제어하고 신뢰성 있는 데이터 전송을 담당 TCP, UDP
- 인터넷 계층 : 통신 노드 간 IP 패킷 전송 및 라우팅 기능 담당 IP(IPv4, IPv6), ARP, RARP
- 물리 계층 : 이더넷, Wi-Fi, 토큰링 ...

#### Three Way Handshake
- 통신을 시작하기 전 세션을 수립하기 위해 수행되는 절차
- 1) Client -> Server : 클라이언트가 서버에서 접속을 요청하는 SYN 패킷 전송, 클라이언트는 SYN/ACK 응답을 기다리는 SYN_SENT 상태가 됨
- 2) Server -> Client : SYN 패킷을 받은 서버가 요청을 수락한다는 의미의 ACK와 SYN 패킷을 전송하고 클라이언트로부터 ACK를 기다림, 서버는 SYN_RECEIVED 상태가 됨
- 3) Client -> Server : 클라이언트가 서버에게 ACK를 보내고 세션 연결이 수립됨, 서버는 ESTABLISHED 상태가 됨

#### Four Way Handshake
- 통신을 끝내기 전 세션을 종료하기 위해 수행되는 절차
- 1) Client -> Server : 클라이언트가 연결 종료를 의미하는 FIN 플래그를 전송
- 2) Server -> Client : 서버는 우선 ACK를 보내고 애플리케이션에게 종료 명령을 내림, 서버는 TIME_WAIT 상태가 됨
- 3) Server -> Client : 애플리케이션이 종료될 준비가 되면 클라이언트에게 FIN 플래그를 전송
- 4) Client -> Server : 클라이언트에서 ACK를 보냄
- 5) Client TIME_WAIT : 서버에서 FIN을 보내기 전에 전송한 패킷이 유실로 인한 재전송 등의 이유로 FIN보다 늦게 도착할 수 있기 때문에 서버로부터 FIN을 받고 나서도 일정 시간(기본 240초)동안 세션을 남겨놓고 패킷을 기다리는 과정을 거침 

### HTTP(HyperText Transfer Protocol) / HTTPS
- WWW 상에서 정보를 주고받을 수 있는 프로토콜로 주로 HTML 문서를 주고받을 때 쓰임
- 주로 TCP를 사용하는데 HTTP/3부터 UDP를 사용함

#### 요청 메시지 포멧
```
[요청 내용] CR(\r) LF(\n)로 끝나야 함
  GET /api/services HTTP/1.1
[헤더] 각 행이 CRLF)로 끝나야 함
  Accept: application/json, text/plain, */*
  Accept-Language: ko,en-US;q=0.9,en;q=0.8
  Referer:
  Accept-Encoding: gzip, deflate
[빈줄] CRLF로 구성
[기타]
```

#### 응답 메시지 포멧
```
[상태표시 행] CRLF로 끝나야 함
  HTTP/1.1 200 OK
[헤더] 각 행이 CRLF로 끝나야 함
  Content-Type: text/html; charset=UTF-8
  Content-Encoding: UTF-8
  Content-Length: 138
  Accept-Ranges: bytes
  Connection: close
[빈줄] CRLF로 구성
[기타]
  <html>
  <head>
    <title>test</title>
  </head>
  <body>
    test
  </body>
  </html>
```

### HTTPS(HyperText Transfer Protocol over Secure Socket Layer)
- HTTP의 보안이 강화된 버전으로 SSL이나 TSL 프로토콜을 통해 세선 데이터를 암호화한다.
  - 넷스케이프에서 개발한 SSL은 표준화 기구인 IETF의 관리를 받으면서 TLS라는 이름으로 변경되었으며, TSL 1.0은 SSL 3.0을 계승한다.

#### SSL 인증서 구성
- 서비스 정보 
- 서버 공개키

